[package]
name = "thoth"
version = "0.2.4"
edition = "2024"
repository = "https://github.com/anitnilay20/thoth"
authors = ["Anit Nilay <anit.nilay20@gmail.com>"]
description = "Thoth is a fast, desktop JSON/NDJSON viewer built with Rust + egui. It opens ~500 MB files by lazily parsing only visible/expanded nodes, keeps the UI responsive with an LRU cache and parallel search, and ships with an Andromeda-themed light/dark UI."
license = "MIT OR Apache-2.0"
readme = "README.md"
rust-version = "1.85"

[package.metadata.release]
# Don't publish to crates.io (this is a desktop app)
publish = false

# Sign commits and tags
sign-commit = false
sign-tag = false

# Push to remote after tagging
push = true
push-remote = "origin"

# Create git tag with 'v' prefix (e.g., v0.2.5)
tag-prefix = "v"
tag-name = "v{{version}}"

# Commit message template
pre-release-commit-message = "chore: release v{{version}}"

# Ensure Cargo.lock is updated
pre-release-replacements = [
  # Update version in bundle metadata to match package version
  {file="Cargo.toml", search="version = \"[^\"]*\"", replace="version = \"{{version}}\"", exactly=2},
]

# Don't run any pre-release hooks
pre-release-hook = []

[lib]
name = "thoth"
path = "src/lib.rs"

[[bin]]
name = "thoth"
path = "src/main.rs"

[package.metadata.bundle]
name = "Thoth"
identifier = "com.thoth.app"
version = "0.2.4"
copyright = "Copyright (c) Anit Nilay 2024. All rights reserved."
category = "Developer Tool"
short_description = "Fast JSON/NDJSON viewer for large files"
long_description = "Thoth is a fast, desktop JSON/NDJSON viewer built with Rust + egui. It opens ~500 MB files by lazily parsing only visible/expanded nodes, keeps the UI responsive with an LRU cache and parallel search, and ships with an Andromeda-themed light/dark UI."

# Icon configuration - PNG for Linux, ICNS for macOS, ICO for Windows
icon = ["assets/thoth_icon_256.png", "assets/Thoth.icns", "assets/thoth_icon_256.ico"]
resources = ["assets/"]

# Windows specific
[package.metadata.bundle.windows]
wix_path = "C:\\Program Files (x86)\\WiX Toolset v3.11\\bin"

# Linux specific
[package.metadata.bundle.linux]
depends = ["libgtk-3-0", "libwebkit2gtk-4.1-0"]


[dependencies]
eframe = "0.32.0"
image = { version = "0.25", default-features = false, features = [
  "png",
  "ico",
] }
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
toml = "0.8"
dirs = "5.0"
rfd = "0.15.4"
anyhow = "1.0"
rayon = "1.11.0"
memchr = "2.7"
self_update = { version = "0.41", features = ["archive-tar", "archive-zip", "compression-flate2"] }
reqwest = { version = "0.12", features = ["json", "blocking"] }
tokio = { version = "1.42", features = ["rt", "sync"] }
chrono = "0.4"
flate2 = "1.0"
tar = "0.4"
zip = "0.6"
open = "5.0"

[dependencies.puffin]
git = "https://github.com/EmbarkStudios/puffin"
optional = true

[dependencies.puffin_egui]
git = "https://github.com/EmbarkStudios/puffin"
optional = true

[dependencies.dhat]
version = "0.3"
optional = true

[features]
default = []
profiling = ["puffin", "puffin_egui", "dhat"]
